name: Build

on:
  workflow_dispatch:

env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  TZ: Asia/Shanghai
  LIBBT_VERSION: RC_1_1
  QBT_VERSION: v4_1_x

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: send telegram message
        uses: appleboy/telegram-action@master
        if: always()
        with:
          to: ${{ secrets.TELEGRAM_TO }}
          token: ${{ secrets.TELEGRAM_TOKEN }}
          format: html
          message: |
            <b>ğŸš€ è‡ªåŠ¨åŒ–æ„å»ºæŠ¥å‘Š</b>

            <b>é¡¹ç›®åç§°:</b> <code>${{ github.repository }}</code>
            <b>æ„å»ºçŠ¶æ€:</b> ${{ job.status == 'success' && 'âœ… æˆåŠŸ' || 'âŒ å¤±è´¥' }}
            <b>å½“å‰ç‰ˆæœ¬:</b> <code>${{ env.QBT_VERSION }}</code>

            <b>ä»£ç æäº¤ä¿¡æ¯:</b>
            ğŸ‘¤ ä½œè€…: ${{ github.actor }}
            ğŸ“ æè¿°: <i>è§¦å‘æ–¹å¼: ${{ github.event_name }} (æ“ä½œè€…: ${{ github.actor }})</i>

            <b>è¯¦æƒ…é“¾æ¥:</b>
            ğŸ”— <a href="https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }}">æŸ¥çœ‹æ„å»ºæ—¥å¿—</a>
            ğŸ› ï¸ <a href="https://github.com/${{ github.repository }}/commit/${{ github.sha }}">æŸ¥çœ‹ä»£ç å˜æ›´</a>
